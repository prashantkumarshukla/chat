<app-header></app-header>
<mat-card>
  <mat-card-content>
    <mat-card-header>
      <div mat-card-avatar
           class="header-image">
      </div>
      <mat-card-title>
        {{userInfo.fName}} {{userInfo.lName}}
      </mat-card-title>
      <mat-card-subtitle *ngIf="userInfo.isOnline; then onlineBlock else offLineBlock">
      </mat-card-subtitle>
      <ng-template #onlineBlock>
        <span class="user-indicator online"></span>
        <span class="indicator-text">
          Online
        </span>
      </ng-template>
      <ng-template #offLineBlock>
        <span class="user-indicator offline"></span>
        <span class="indicator-text">
          Offline
        </span>
      </ng-template>
    </mat-card-header>
    <mat-card-content>

      <app-add-friend [actionObj]="userInfo"></app-add-friend>
      <app-request-action [actionObj]="userInfo"></app-request-action>
      <hr />
      <div class="chat-pane">
        <div class="message-section"
             *ngIf="conversations !== undefined">
          <div *ngFor="let item of conversations">
            <div class="sent"
                 *ngIf="item.requestType=='sent'">
              <p>{{item.message}}</p>
            </div>
            <div class="received"
                 *ngIf="item.requestType=='recieved'">
              <p>{{item.message}}</p>
            </div>
          </div>
        </div>
      </div>
      <div class="send-message-pane">
        <p class="typingStatus"
           *ngIf="typeResponse">
          {{typeResponse}}
        </p>
        <form [formGroup]="messageForm"
              (ngSubmit)="sendMessage(messageForm.value)">
          <input class="form-control type-pane"
                 type="text"
                 formControlName="chatMessage"
                 (keyup)="userTyping('none')"
                 (keydown)="userTyping('typing')"/>
          <button mat-raised-button
                  type="submit"
                  class="send-message">
            <i class="material-icons">
              send
            </i>
          </button>
        </form>
        <div class="emoji">
          <button>
            <i class="fa fa-smile-o"
               aria-hidden="true">
            </i>
          </button>
          <button>
            <i class="fa fa-picture-o"
               aria-hidden="true">
            </i>
          </button>
        </div>
      </div>
    </mat-card-content>
  </mat-card-content>
</mat-card>
